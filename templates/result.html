{% extends "base.html" %}
{% load static %}

{% block title %}ë¶„ì„ ê²°ê³¼ - Link Shield{% endblock %}

{% block content %}
<div class="result-header">
    <a href="{% url 'analyzer:index' %}" class="back-btn">
        <span>â†</span> ìƒˆë¡œìš´ ë¶„ì„
    </a>
    <h1 class="result-title">ë¶„ì„ ê²°ê³¼</h1>
</div>

<!-- URL ì •ë³´ ì¹´ë“œ -->
<div class="card result-card">
    <div class="card-header">
        <h2>ğŸ”— ë¶„ì„ëœ URL</h2>
        <div class="status-badge status-complete">ë¶„ì„ ì™„ë£Œ</div>
    </div>
    <div class="card-body">
        <div class="url-display">
            <div class="url-label">ì…ë ¥ URL</div>
            <div class="url-value">{{ result.original_url }}</div>
        </div>
        {% if result.final_url != result.original_url %}
        <div class="url-display redirect-info">
            <div class="url-label">
                <span class="redirect-icon">ğŸ”„</span> ìµœì¢… URL
            </div>
            <div class="url-value">{{ result.final_url }}</div>
        </div>
        {% endif %}
    </div>
</div>

<!-- ìŠ¤í¬ë¦°ìƒ· ì¹´ë“œ -->
<div class="card result-card">
    <div class="card-header">
        <h2>ğŸ“¸ í˜ì´ì§€ ìŠ¤í¬ë¦°ìƒ·</h2>
    </div>
    <div class="card-body">
        <div class="screenshot-container">
            {% if result.screenshot_path %}
                <img src="{{ result.screenshot_path }}" alt="í˜ì´ì§€ ìŠ¤í¬ë¦°ìƒ·" class="screenshot-img">
            {% else %}
                <div class="screenshot-placeholder">
                    <div class="placeholder-icon">ğŸ–¼ï¸</div>
                    <p>ìŠ¤í¬ë¦°ìƒ·ì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- ë©”íƒ€ë°ì´í„° ì¹´ë“œ -->
<div class="card result-card">
    <div class="card-header">
        <h2>ğŸ“‹ í˜ì´ì§€ ì •ë³´</h2>
    </div>
    <div class="card-body">
        <div class="metadata-grid">
            <div class="metadata-item">
                <div class="metadata-label">í˜ì´ì§€ ì œëª©</div>
                <div class="metadata-value">{{ result.page_title|default:"ì •ë³´ ì—†ìŒ" }}</div>
            </div>
            <div class="metadata-item">
                <div class="metadata-label">ë„ë©”ì¸</div>
                <div class="metadata-value">{{ result.domain }}</div>
            </div>
            <div class="metadata-item">
                <div class="metadata-label">IP ì£¼ì†Œ</div>
                <div class="metadata-value">{{ result.ip_address|default:"í™•ì¸ ì¤‘..." }}</div>
            </div>
            <div class="metadata-item">
                <div class="metadata-label">ë¶„ì„ ì‹œê°„</div>
                <div class="metadata-value">{{ result.analyzed_at }}</div>
            </div>
        </div>
    </div>
</div>

<!-- ë„¤íŠ¸ì›Œí¬ í™œë™ ì¹´ë“œ -->
<div class="card result-card">
    <div class="card-header">
        <h2>ğŸŒ ë„¤íŠ¸ì›Œí¬ í™œë™</h2>
    </div>
    <div class="card-body">
        <div class="network-stats">
            <div class="stat-item">
                <div class="stat-number">{{ result.network_requests|default:"0" }}</div>
                <div class="stat-label">ë„¤íŠ¸ì›Œí¬ ìš”ì²­</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ result.redirects|default:"0" }}</div>
                <div class="stat-label">ë¦¬ë‹¤ì´ë ‰ì…˜</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ result.js_errors|default:"0" }}</div>
                <div class="stat-label">JS ì˜¤ë¥˜</div>
            </div>
        </div>
    </div>
</div>

<!-- ìœ„í—˜ë„ í‰ê°€ ì¹´ë“œ (ë°ëª¨ìš©) -->
<div class="card result-card risk-card">
    <div class="card-header">
        <h2>âš¡ ì¢…í•© í‰ê°€</h2>
    </div>
    <div class="card-body">
        <div class="risk-score">
            <div class="score-circle score-{{ result.risk_level|default:'low' }}">
                <div class="score-value">{{ result.risk_score|default:"25" }}</div>
                <div class="score-max">/100</div>
            </div>
            <div class="risk-description">
                <h3 class="risk-title">{{ result.risk_label|default:"ë‚®ì€ ìœ„í—˜ë„" }}</h3>
                <p>{{ result.risk_message|default:"í˜„ì¬ê¹Œì§€ ë°œê²¬ëœ ëª…ë°±í•œ ìœ„í˜‘ ìš”ì†ŒëŠ” ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í•­ìƒ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤." }}</p>
            </div>
        </div>
    </div>
</div>

<!-- ë‹¤ì‹œ ë¶„ì„ ë²„íŠ¼ -->
<div class="action-section">
    <a href="{% url 'analyzer:index' %}" class="action-btn">
        <span>ğŸ”</span>
        ë‹¤ë¥¸ URL ë¶„ì„í•˜ê¸°
    </a>
</div>
{% endblock %}